<html>
    <body>
        <div class="rainbow" style="z-index:-2000;">
            <div id="table">
                <div style="margin:auto;margin-top:500px;font-size:16px;text-align:center;"></div>
            </div>
        </div>
        <div>
            <img src="../static/bomb.png" class="bomb" id="nobomb" height="330px" width='330px' style="z-index:1000;position:absolute;bottom:110%;right:5%;animation-delay:0.6s">
            <img src="../static/bomb.png" class="bomb" id="nobomb" height="330px" width='330px' style="z-index:1000;position:absolute;bottom:110%;right:25%;animation-delay:0.4s">
            <img src="../static/bomb.png" class="bomb" id="nobomb" height="330px" width='330px' style="z-index:1000;position:absolute;bottom:110%;right:45%;animation-delay:0.2s">
            <img src="../static/bomb.png" class="bomb" id="nobomb" height="330px" width='330px' style="z-index:1000;position:absolute;bottom:110%;right:65%;animation-delay:0.8s">
            <img src="../static/bomb.png" class="bomb" id="nobomb" height="330px" width='330px' style="z-index:1000;position:absolute;bottom:110%;right:85%;">
        </div>

        <div class="explosion" id="noexplosion" style="visibility:hidden;z-index:3000;">
            <img src="../static/white.png" height="10000px" style="right:0%;bottom:0%;position:absolute;box-shadow:none !important">
            <div style="font-family:'Tahoma', sans-serif;font-size:200px;z-index:5000;font-weight:bold;color:black;position:absolute;right:23%;bottom:45%;">BOMB POT</div>
        </div>

        <div>
            <button class="bombPot" style="position:absolute;right:25%;top:50%;">Click Me</button>
        </div>
        <div class="isBomb" style="visibility:hidden;">no</div>
    </body>

</html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $('.bombPot').on('click', function(event) {
            document.getElementsByClassName("isBomb")[0].innerHTML = "yes";
        });
    });
    $(document).ready(function() {
        $('.bombPot').on('click', function(event) {
            $.ajax({
                data : {
                    bet : "BOMB POT",
                },
                type : 'POST',
                url : '/bet',
            })
            .done(function(data) {
                if (data.error) {
                    $('#errorAlert').text(data.error).show();
                    $('#successAlert').hide();
                }
                else {
                    $('#successAlert').text(data.name).show();
                    console.log("SUCCESS")
                    $('#errorAlert').hide();
                }
            });
            event.preventDefault();
        });
    });
    function setBombPot() {
        for (let i=0; i<5; i++) {
            document.getElementsByClassName("bomb")[i].id = "bomb";
        }
        setTimeout(resetBomb, 4000);
    }
    function resetBomb() {
        document.getElementsByClassName("explosion")[0].style.visibility = "visible";
        document.getElementsByClassName("explosion")[0].id = "explosion";
        for (let i=0; i<5; i++) {
            document.getElementsByClassName("bomb")[i].id = "nobomb";
        }
        setTimeout(resetScreen,5000)
    }
    function resetScreen() {document.getElementsByClassName("explosion")[0].id = "noexplosion";document.getElementsByClassName("explosion")[0].style.visibility = "hidden";}
</script>

<style>
    #table {
        position: absolute;
        display: block;
        box-sizing: border-box;
        right:2%;
        width: 96%;
        bottom:4%;
        z-index: -10;
        height:92%;
        background: radial-gradient(circle, rgba(8,128,6,1) 0%, rgba(38,52,38,1) 100%);
        border-radius: 10000px;
    }
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-image: radial-gradient(
            farthest-corner at 40px 40px,
            #f35 0%,
            #43e 100%
          );
    }
    
    *, *::before, *::after {
        box-sizing: border-box;
    }
    
    @keyframes rotate {
        100% {
            transform: rotate(1turn);
        }
    }
    .grow img{
        transition: .25s ease;
        }
        
        .grow img:hover{
        -webkit-transform: scale(1.1);
        -ms-transform: scale(1.1);
        transform: scale(1.1);
        transition: .25s ease;
        }
    
    .rainbow {
        position: absolute;
        z-index: 0;
        width: 75%;
        height: 65%;
        border-radius: 10000px;
        overflow: hidden;
        padding: 2rem;
        
        &::before {
            content: '';
            position: absolute;
            z-index: -20;
            left: -100%;
            top: -100%;
            width: 300%;
            height: 300%;
            background-color: #cbcbcb;
            background-repeat: no-repeat;
            background-size: 50% 50%, 50% 50%;
            background-position: 0 0, 100% 0, 100% 100%, 0 100%;
            background-image: linear-gradient(#acacac, #cbcbcb), linear-gradient(#7b7b7b, #cbcbcb), linear-gradient(#cbcbcb, #d0d0d0), linear-gradient(#d0d0d0, #acacac);
            animation: rotate 10s linear infinite;
        }
        
        &::after {
            position: absolute;
            display: block;
            box-sizing: border-box;
            right:17.5%;
            width: 65%;
            bottom:22.5%;
            height:55%;
            background: radial-gradient(circle, rgba(8,128,6,1) 0%, rgba(38,52,38,1) 100%);
            border-radius: 10000px;
        }
    }
    #bomb{
        position:absolute;
        right:40%;
        bottom:110%;
        animation: bombs 2s ease-in;
        animation-fill-mode: forwards;
    }
    @keyframes bombs {
        0% {bottom:110%;transform: rotate(180deg)}
        100% {bottom:0%;transform: rotate(90deg)}
    }
    #explosion {
        animation: exploded 2s;
        animation-delay: 3s;
        animation-fill-mode: forwards;
    }
    @keyframes exploded {
        from {opacity:1.0;}
        to {opacity:0.0;}
    }

      
</style>
